# This metadata format is based on the FOT-Net Data Sharing Framework (DSF).
# The DSF can be consulted if anything is unclear; each section in the format is directly
# or indirectly based on a section in the DSF document.
# https://www.connectedautomateddriving.eu/wp-content/uploads/2021/09/Data-Sharing-Framework-v1.1-final.pdf

# The summary should contain a thorough description of the study design and execution.
# The description must be complete and self-contained, but can contain links
# to images and further information (but keep in mind that the description
# must make sense even if those links should stop working.)
# Multiline strings can be written by starting the value with a pipe symbol (|).
summary:
  why_was_it_collected: |
    To test GNSS and mobile network connectivity in the MODI corridor between Malmö and Moss.

  how_was_the_collection_executed: |
    Field test trial collecting several relevant parameters related to GNSS and mobile network connectivity.

  objectives: |
    Test GNSS and mobile network connectivity in the MODI corridor between Malmö and Moss.

  research_questions: |
    How is the GNSS and mobile network connectivity in the MODI corridor between Malmö and Moss?

  experimental_plan: |
    Two Sierra XR80  4G/5G antennas and one Swift Duro GNSS receiver where mounted on a personal car, with two separate modems 
    connected to be able to measure both Telenor and Telia coverage throughout the route.

    Iperf was run in TCP mode and for the most part with unlimited bitrate, which means that the transfer speed is regulated
    entirely by TCP’s built-in congestion control and flow control mechanisms. The connection will try to utilize the maximum 
    available bandwidth by adjusting its congestion window based on network feedback (packet loss, delay, etc.).

  sample_selection_criteria: N/A

  # A person that can be contacted for more information about this dataset.
  contact_person: Petter Arnesen, petter.arnesen@sintef.no

  # A web address to download the data if applicable.
  web_address: N/A

  # Which entity produced this dataset
  producer_of_data: SINTEF

  # Data set DOI if applicable
  DOI: N/A

  # Which are the data are from. Can be an exact coordinate, a polygon, a town name, a country name, etc.
  # If providing coordinates/polygons, it must be encoded as WKT with an SRID of 4326.
  data_area: Norway and Sweden, from Malmö to Moss.

  # Which type of data this is.
  # Must be one or more of:
  #     survey, interviews, mobile network, itsg5, lane markings, signage, physical road infrastructure,
  #     speed/acceleration, video, pictures, gnss, lidar, radar, weather, vehicle probe data, events, other.
  # You may add multiple data types if relevant, separated by a comma.
  data_type: mobile network, gnss

  # Which of the use cases in MODI this dataset is related to.
  # Must be one of: UCNL, UCGE, UCSE, UCNO, UCCCAM, Other tasks
  modi_use_case: UCCCAM

  # An approximate description of the size of this dataset
  dataset_size: Approximately 42 MB (27k datapoints).

  # A tiny sample of the dataset to show how it looks (if possible).
  dataset_example: |
    {"session":"2025-04-23_gbg-moss_tcp-12mbps","imei":"351850975171268","event":"interval","data":{"streams":[{"socket":"6","start":584.001252,"end":585.001278,"seconds":1.0000259876251221,"bytes":"0","bits_per_second":0,"retransmits":"0","snd_cwnd":"1018012","snd_wnd":"-1","rtt":"712960","rttvar":"10137","pmtu":"1500","omitted":false,"sender":true},{"socket":"8","start":584.001259,"end":585.001294,"seconds":1.0000350475311279,"bytes":"0","bits_per_second":0,"retransmits":"0","snd_cwnd":"1026608","snd_wnd":"-1","rtt":"707765","rttvar":"6679","pmtu":"1500","omitted":false,"sender":true}],"sum":{"start":584.001252,"end":585.001278,"seconds":1.0000259876251221,"bytes":"0","bits_per_second":0,"retransmits":"0","omitted":false,"sender":true}}}
    {"session":"2025-04-23_gbg-moss_tcp-12mbps","imei":"351850975171268","event":"interval","data":{"streams":[{"socket":"6","start":680.000199,"end":681.00017,"seconds":0.99997097253799438,"bytes":"0","bits_per_second":0,"retransmits":"49","snd_cwnd":"823988","snd_wnd":"-1","rtt":"1291506","rttvar":"25322","pmtu":"1500","omitted":false,"sender":true},{"socket":"8","start":680.00021,"end":681.000176,"seconds":0.999966025352478,"bytes":"0","bits_per_second":0,"retransmits":"68","snd_cwnd":"838724","snd_wnd":"-1","rtt":"1306404","rttvar":"12519","pmtu":"1500","omitted":false,"sender":true}],"sum":{"start":680.000199,"end":681.00017,"seconds":0.99997097253799438,"bytes":"0","bits_per_second":0,"retransmits":"117","omitted":false,"sender":true}}}
    {"session":"2025-04-23_gbg-moss_tcp-12mbps","imei":"351850975171268","event":"interval","data":{"streams":[{"socket":"6","start":822.001323,"end":823.000298,"seconds":0.99897497892379761,"bytes":"0","bits_per_second":0,"retransmits":"51","snd_cwnd":"796972","snd_wnd":"-1","rtt":"1023556","rttvar":"3245","pmtu":"1500","omitted":false,"sender":true},{"socket":"8","start":822.001339,"end":823.000306,"seconds":0.99896699190139771,"bytes":"0","bits_per_second":0,"retransmits":"36","snd_cwnd":"913632","snd_wnd":"-1","rtt":"1014120","rttvar":"4037","pmtu":"1500","omitted":false,"sender":true}],"sum":{"start":822.001323,"end":823.000298,"seconds":0.99897497892379761,"bytes":"0","bits_per_second":0,"retransmits":"87","omitted":false,"sender":true}}}

# 5.3.3 Administrative metadata
# "Administrative metadata are collected for the effective operation and management of data
# storage and catalogues. This administrative information, covering various topics, is stored
# along with the datasets. From a FOT data re-use perspective, the key role of administrative
# metadata is to cover access conditions, rights, ownership and constraints."
administrative:
  # The version number of this dataset, used to keep track of different
  # versions if it is uploaded multiple times.
  # The version number can be numeric, date-based, or anything else, but
  # it must be easy to see which version is newer without further knowledge.
  version_number: 1

  # The date this dataset was uploaded. Must be in ISO 8601 format (YYYY-MM-DD).
  archiving_date: 2025-07-25

  # A unique identifier for this dataset. This will be used to identify this and
  # future updates in the metadata database, and must never be changed after the
  # dataset has been uploaded for the first time.
  unique_dataset_id: modi_uc_ccam_einride_data_collection_malmo_moss_iperf

  # Who has rights to use this dataset?
  rights: Open, see Access for contact info

  # Does the dataset have a specific license for usage?
  license: No

  # Who can access the dataset?
  access: Everyone, contact petter.arnesen@sintef.no

  # Any constraints in usage of the dataset?
  constraints: N/A

  # Can the dataset be used for free, or does usage incur any costs/billing for the user?
  billing: The dataset can be used without cost as long as access and constraints are agreed upon.

  # When the data set will stop existing (for example due to privacy regulations).
  # Must be in ISO 8601 format (YYYY-MM-DD).
  data_end_of_life: 2026-03-31

  # A more detailed description of the various processes of the data collection,
  # for example the methods/tools used to collect the data, filtering, post-processing,
  # storage file structure, etc.
  # This should include information about relevant conditions during the data collection
  # (for example weather, climate, time of day, etc).
  # Each key under "processes" can be custom made, and there can be as many as is
  # necessary. The proposed keys are just examples.
  processes:
    collection: |
      Two Sierra XR80  4G/5G antennas and one Swift Duro GNSS receiver where mounted on a personal car, with two separate modems 
      connected to be able to measure both Telenor and Telia coverage throughout the route.

      Data was collected from three different sources. Connectivity data was measured with iPerf 3.18  and directly from the modems. 
      GNSS data was recorded directly from the GNSS receiver. The software used to collect the data was developed inhouse by Einride.
      Iperf was run in TCP mode and for the most part with unlimited bitrate, which means that the transfer speed is regulated entirely
      by TCP’s built-in congestion control and flow control mechanisms. The connection will try to utilize the maximum available 
      bandwidth by adjusting its congestion window based on network feedback (packet loss, delay, etc.).

      Each cellular modem has its own IMEI:
      - 351850975171524 (Telenor - Swedish SIM-card)
      - 351850975171268 (Telia - Swedish and Norwegian SIM-cards)
    filtering: |
      This data set is the raw data, and has no filters.
    aggregation: |
      This data set is the raw data, and has no aggregations.

# 5.3.2 Structural metadata
# "Structural metadata are used to describe how the data are structured in relation to other
# data. Data are organized into a system (e.g., a database and/or file system), a structure or
# database schema and a data content format. The aim of structural metadata is to facilitate
# the initial phase of data re-use by providing the necessary documentation about how the data
# is organized. The description should include the file system, the file structure and how to
# interpret the contents of a data container. All components of the dataset need to be
# described."
structural:
  summary: |
    GNSS and cellular data in samples.json, and iPerf TCP data in iperf_tcp_intervals.json.
    There are also two files with start and end events for the iPerf TCP data, but these are not included in this metadata file.

  # File format. Please include attributes such as delimiter for CSV, decimal separator,
  # thousand separator (if any), and any other properties that is relevant for parsing the data.
  file_format: line delimited JSON (JSONL), with each line being a JSON object.

  # Please describe the storage structure of the data. If it consists of flat files, the folder
  # structure and file naming can be relevant. If it is a database, a description of the relevant
  # tables, indices, triggers and views is important.
  file_structure: |
    Flat files.

  # Which tools can be used to read the data. Especially important for non-standard formats.
  required_tools: notepad, various JSON parsing libraries

  # If the files were made using a specific tool, the tool name and version may be relevant
  # for reading the data.
  tool_versions: N/A

  # Additional keys and values can be added here if this is a non-standard format that requires
  # a more detailed explanation.

# 5.3.1 Descriptive metadata
# "Descriptive metadata shall include detailed information needed to understand each part of a
# dataset. The purpose is to describe the dataset and build trust in it—by providing not only the
# characteristics of each measure or component, but also information about how the data were
# generated and collected."
descriptive:
  # The descriptions can vary by data type.
  # For each data field in your dataset, please fill out all relevant parameters from section
  # 5.3.1 of the DSF, and enter the attributes using the "Data description item" in lower-case
  # as the key. The following list lists the most relevant attributes from the tables, see
  # tables 3 to 9 in the DSF for full explanations.

  # - description
  # - data_precision
  # - unit
  # - sample_rate
  # - filter
  # - origin
  # - bias
  # - type
  # - definition
  # - range
  # - error_codes
  # - quality
  # - offset
  # - enumeration_specification
  # - availability
  # - srid (for coordinates)
  # - time_zone (for time stamps)
  # - time_format (for time stamps)

  # Please note the following additions to the DSF:
  # - When dealing with coordinates, the SRID must be specified with the srid key.
  # - When dealing with times, the time zone must be specified with the timezone key.
  # - When dealing with dates or times, the format must be specified with the format key.

  fields:
    session:
      description: |
        The measurement session. A new session was started after each time the car stopped.

      sample_rate: 1hz
      origin: The data collection app.
      type: string
      quality: High

    imei:
      description: |
        The IMEI of the modem used to collect the data. Each modem has its own IMEI:
        - 351850975171524 (Telenor - Swedish SIM-card)
        - 351850975171268 (Telia - Swedish and Norwegian SIM-cards)
      sample_rate: 1hz
      origin: The data collection app.
      type: string
      quality: High

    event:
      description: |
        The type of event. Can be "start", "end", or "interval". "start" and "end" events are used to mark the start and end of a measurement session,
        while "interval" events are used to mark the intervals between measurements. "start" and "end" events are not included in this metadata file,
        but are included in two separate files: iperf_tcp_start_events.json and iperf_tcp_end_events.json.
      sample_rate: 1hz
      origin: The data collection app.
      type: string
      quality: High

    data:
      description: |
        The data collected during the measurement session. This is a JSON object containing the following fields:
        - streams: An array of streams, each containing the following fields:
          - socket: The socket number.
          - start: The start time of the stream in seconds since the start of the session.
          - end: The end time of the stream in seconds since the start of the session.
          - seconds: The duration of the stream in seconds.
          - bytes: The number of bytes transferred during the stream.
          - bits_per_second: The average bitrate of the stream in bits per second.
          - retransmits: The number of retransmits during the stream.
          - snd_cwnd: The size of the send congestion window in bytes.
          - snd_wnd: The size of the send window in bytes.
          - rtt: The round-trip time in microseconds.
          - rttvar: The round-trip time variance in microseconds.
          - pmtu: The path MTU in bytes.
          - omitted: Whether the stream was omitted from the summary.
          - sender: Whether the stream was sent by the sender.
        - sum: A summary of the streams, containing the same fields as the streams, but
          aggregated over all streams in the session.
      sample_rate: 1hz
      origin: The data collection app.
      type: object
      quality: High
